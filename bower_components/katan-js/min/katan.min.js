/* Copyright (c) 2015 Ryan Morrissey <https://rymo.io/> */
!function(t){function e(t,e){return y.call(t,e)}function r(t,e,r){var o=Raphael(t,e,r);o.canvas.setAttribute("preserveAspectRatio","xMidYMid meet"),getId=function(){return t},getCanvas=function(){return o}}function o(t,e){var e=e||{},r={cx:0,cy:0,fill:C.belizehole,stroke:"none",strokeWidth:0,innerCircle:!1,innerCircleFill:C.clouds,innerCircleStroke:"none",innerCircleStrokeWidth:0,textFill:C.belizehole,fontSize:18,fontWeight:400,resourceIcon:"",state:!1,stateFill:C.amethyst,stateStroke:C.clouds,stateStrokeWidth:2,stateTextFill:C.clouds,stateFontSize:18,stateFontWeight:400,stateCursor:"pointer",scale:[],rotate:[],_coords:"M0,52 L30,0 L90,0 L120,52 L90,104 L30,104z"};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var i=t.set(t.path(e._coords)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}),a=t.set().data("state",!1);if(e.innerCircle){a.push(t.circle(60,52,16).attr({fill:e.innerCircleFill,stroke:e.innerCircleStroke,"stroke-width":e.innerCircleStrokeWidth}));var n=F[e.resourceIcon]?F[e.resourceIcon]:"";a.push(t.text(60,52,n).attr({fill:e.textFill,"font-size":e.fontSize,"font-family":x,"font-weight":e.fontWeight})),i.push(a)}e.state&&(a.attr({cursor:e.stateCursor}),a.click(function(){c(a,e)}));var s,l;e.scale&&(s=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==S(e.scale)?"s"+S(e.scale):""),e.rotate&&"NaN"!==S(e.rotate)&&(l=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==S(e.rotate)?"r"+S(e.rotate):""),i.transform("T"+e.cx+","+e.cy+l+s)}function i(t,e){var e=e||{},r=28,o={cx:0,cy:0,w:r,h:r/2,fill:C.clouds,stroke:C.midnightblue,strokeWidth:2,text:"1",textFill:C.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:C.amethyst,stateStroke:C.clouds,stateStrokeWidth:2,stateTextFill:C.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[]};for(var i in o)!(i in e)&&(e[i]=o[i]);getOptions=function(){return e};var a=t.set(t.rect(e.cx,e.cy,e.w,e.h)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);a.push(t.text(e.cx+e.w/2,e.cy+e.h/2,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(a.attr({cursor:e.stateCursor}),a.click(function(){c(a,e)}));var n,s;e.scale&&(n=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==S(e.scale)?"s"+S(e.scale):""),e.rotate&&"NaN"!==S(e.rotate)&&(s=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==S(e.rotate)?"r"+S(e.rotate):""),a.transform("T"+e.cx+","+e.cy+s+n)}function a(t,e){var e=e||{},r={cx:0,cy:0,fill:C.clouds,stroke:C.midnightblue,strokeWidth:2,text:"",textFill:C.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:C.amethyst,stateStroke:C.clouds,stateStrokeWidth:2,stateTextFill:C.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[]};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var i=t.set(t.ellipse(10,18,8,18),t.circle(10,7,7)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);i.push(t.text(10,23,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(i.attr({cursor:e.stateCursor}),i.click(function(){c(i,e)}));var a,n;e.scale&&(a=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==S(e.scale)?"s"+S(e.scale):""),e.rotate&&"NaN"!==S(e.rotate)&&(n=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==S(e.rotate)?"r"+S(e.rotate):""),i.transform("T"+e.cx+","+e.cy+n+a)}function n(t,e){var e=e||{},r={cx:0,cy:0,fill:C.clouds,stroke:C.midnightblue,strokeWidth:2,text:"",textFill:C.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:C.amethyst,stateStroke:C.clouds,stateStrokeWidth:2,stateTextFill:C.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[],_coords:"M0,8 L8,0 L16,8 L16,21 L0,21z"};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var i=t.set(t.path(e._coords)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);i.push(t.text(8,13,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(i.attr({cursor:e.stateCursor}),i.click(function(){c(i,e)}));var a,n;e.scale&&(a=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==S(e.scale)?"s"+S(e.scale):""),e.rotate&&"NaN"!==S(e.rotate)&&(n=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==S(e.rotate)?"r"+S(e.rotate):""),i.transform("T"+e.cx+","+e.cy+n+a)}function s(t,e){var e=e||{},r={cx:0,cy:0,fill:C.clouds,stroke:C.midnightblue,strokeWidth:2,text:"",textFill:C.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:C.amethyst,stateStroke:C.clouds,stateStrokeWidth:2,stateTextFill:C.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[],_coords:"M0,8 L8,8 L16,0 L24,8 L24,21 L0,21z"};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var i=t.set(t.path(e._coords)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);i.push(t.text(15,14,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(i.attr({cursor:e.stateCursor}),i.click(function(){c(i,e)}));var a,n;e.scale&&(a=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==S(e.scale)?"s"+S(e.scale):""),e.rotate&&"NaN"!==S(e.rotate)&&(n=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==S(e.rotate)?"r"+S(e.rotate):""),i.transform("T"+e.cx+","+e.cy+n+a)}function l(t,r){for(var o in r)e(r,o)&&(t[o]=r[o]);return e(r,"toString")&&(t.toString=r.toString),e(r,"valueOf")&&(t.valueOf=r.valueOf),t}function c(t,e){var r;t[0].data("orig_options")?r=t[0].data("orig_options"):(r={},t.forEach(function(t,e){r[e]=t.attr(["fill","stroke","stroke-width","font-size","font-weight"])}),t.data("orig_options",r)),t[0].data("state")?(t.forEach(function(t,e){t.attr(-1!=["rect","circle","ellipse","path"].indexOf(t.type)?{fill:r[e].fill,stroke:r[e].stroke,"stroke-width":r[e]["stroke-width"]}:{fill:r[e].fill,"font-size":r[e]["font-size"],"font-weight":r[e]["font-weight"]})}),t.data("state",!1)):(t.forEach(function(t){t.attr(-1!=["rect","circle","ellipse","path"].indexOf(t.type)?{fill:e.stateFill,stroke:e.stateStroke,"stroke-width":e.stateStrokeWidth}:{fill:e.stateTextFill,"font-size":e.stateFontSize,"font-weight":e.stateFontWeight})}),t.data("state",!0))}var f,u,h,d,g,p,k="1.0.0",y=Object.prototype.hasOwnProperty,S=(t.parseInt,t.parseFloat),x="Katan",F={brick:"\ue000",ore:"\ue003",wool:"\ue004",lumber:"\ue005",grain:"\ue006",desert:"?","":""},C={alizarin:"#E74C3C",amethyst:"#9B59B6",asbestos:"#7F8C8D",belizehole:"#2980B9",carrot:"#E67E22",clouds:"#ECF0F1",concrete:"#95A5A6",emerland:"#2ECC71",greensea:"#16A085",midnightblue:"#2C3E50",nephritis:"#27AE60",orange:"#F39C12",peterriver:"#3498DB",pomegranate:"#C0392B",pumpkin:"#D35400",silver:"#BDC3C7",sunflower:"#F1C40F",turquoise:"#1ABC9C",wetasphalt:"#34495E",wisteria:"#8E44AD"};f=function(t,e,o){return new r(t,e,o)},f.version=k,f.getColors=function(){return C},f.isKatan=function(t){return t instanceof r||t instanceof o||t instanceof i||t instanceof a||t instanceof n||t instanceof s||null!=t&&e(t,"_isAKatanObject")},u=function(t,e){return new o(t,e)},h=function(t,e){return new i(t,e)},d=function(t,e){return new a(t,e)},g=function(t,e){return new n(t,e)},p=function(t,e){return new s(t,e)},l(f.fn=r.prototype,{getId:function(){return getId()},getCanvas:function(){return getCanvas()}}),t.Katan=f,l(u.fn=o.prototype,{getOptions:function(){return getOptions()}}),t.Katan.HexTile=u,l(h.fn=i.prototype,{getOptions:function(){return getOptions()}}),t.Katan.Road=h,l(d.fn=a.prototype,{getOptions:function(){return getOptions()}}),t.Katan.Knight=d,l(g.fn=n.prototype,{getOptions:function(){return getOptions()}}),t.Katan.Settlement=g,l(p.fn=s.prototype,{getOptions:function(){return getOptions()}}),t.Katan.City=p}(window,document);