/* Copyright (c) 2015 Ryan Morrissey <https://rymo.io/> */
!function(t,e,r){function o(t,e){return F.call(t,e)}function n(t,e){if("undefined"!=typeof console&&"string"==typeof t&&"string"==typeof e)switch(t.toLowerCase()){case"info":console.info("Info: "+e);break;case"debug":console.log("Debug: "+e);break;case"warn":console.warn("Warning: "+e);break;case"error":console.error("Error: "+e);break;default:console.log("Log: "+e)}}function i(t,e,r){var o=t,i=e||{},a=r||"xMinYMin meet";if(!t instanceof Raphael._Paper)return void n("error","You must pass a valid Raphael paper object!");if(o.canvas.setAttribute("preserveAspectRatio",a),i&&Object.keys(i).length>0)try{o.setViewBox(i.x||0,i.y||0,i.w,i.h,i.fit||!0)}catch(s){n("error","Your viewbox keys caused an error: "+s)}getId=function(){return o.canvas.parentElement.id},getCanvas=function(){return n("warn","This method has been deprecated in favor of Katan().getPaper()"),o},getPaper=function(){return o}}function a(t,e){var e=e||{},o={cx:0,cy:0,fill:m.belizehole,stroke:"none",strokeWidth:0,innerCircle:!1,innerCircleText:"",innerCircleFill:m.clouds,innerCircleStroke:"none",innerCircleStrokeWidth:0,textFill:m.belizehole,fontSize:18,fontWeight:400,state:!1,stateFill:m.amethyst,stateStroke:m.clouds,stateStrokeWidth:2,stateTextFill:m.clouds,stateFontSize:18,stateFontWeight:400,stateCursor:"pointer",scale:[],rotate:[],_coords:"M0,52 L30,0 L90,0 L120,52 L90,104 L30,104z"};for(var n in o)!(n in e)&&(e[n]=o[n]);getOptions=function(){return e};var i=t.set(t.path(e._coords)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}),a=t.set().data("state",!1);if(e.innerCircle){a.push(t.circle(60,52,16).attr({fill:e.innerCircleFill,stroke:e.innerCircleStroke,"stroke-width":e.innerCircleStrokeWidth}));var s;z[e.innerCircleText]!==r?(s=z[e.innerCircleText],a.push(t.text(60,52,s).attr({fill:e.textFill,"font-size":e.fontSize,"font-family":v,"font-weight":e.fontWeight}))):"NaN"!==w(e.innerCircleText)&&(s=w(e.innerCircleText),a.push(t.text(60,50,s).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight}),t.text(60,60,W[s]).attr({fill:e.textFill,"font-size":Math.floor(.45*e.fontSize)}))),i.push(a)}e.state&&(a.attr({cursor:e.stateCursor}),a.click(function(){h(a,e)}));var l,c;e.scale&&(l=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==C(e.scale)?"s"+C(e.scale):""),e.rotate&&"NaN"!==C(e.rotate)&&(c=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==C(e.rotate)?"r"+C(e.rotate):""),i.transform("T"+e.cx+","+e.cy+c+l),getSet=function(){return i}}function s(t,e){var e=e||{},r=28,o={cx:0,cy:0,w:r,h:r/2,fill:m.clouds,stroke:m.midnightblue,strokeWidth:2,text:"1",textFill:m.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:m.amethyst,stateStroke:m.clouds,stateStrokeWidth:2,stateTextFill:m.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[]};for(var n in o)!(n in e)&&(e[n]=o[n]);getOptions=function(){return e};var i=t.set(t.rect(e.cx,e.cy,e.w,e.h)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);i.push(t.text(e.cx+e.w/2,e.cy+e.h/2,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(i.attr({cursor:e.stateCursor}),i.click(function(){h(i,e)}));var a,s;e.scale&&(a=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==C(e.scale)?"s"+C(e.scale):""),e.rotate&&"NaN"!==C(e.rotate)&&(s=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==C(e.rotate)?"r"+C(e.rotate):""),i.transform("T"+e.cx+","+e.cy+s+a),getSet=function(){return i}}function l(t,e){var e=e||{},r={cx:0,cy:0,fill:m.clouds,stroke:m.midnightblue,strokeWidth:2,text:"",textFill:m.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:m.amethyst,stateStroke:m.clouds,stateStrokeWidth:2,stateTextFill:m.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[]};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var n=t.set(t.ellipse(10,18,8,18),t.circle(10,7,7)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);n.push(t.text(10,23,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(n.attr({cursor:e.stateCursor}),n.click(function(){h(n,e)}));var i,a;e.scale&&(i=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==C(e.scale)?"s"+C(e.scale):""),e.rotate&&"NaN"!==C(e.rotate)&&(a=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==C(e.rotate)?"r"+C(e.rotate):""),n.transform("T"+e.cx+","+e.cy+a+i),getSet=function(){return n}}function c(t,e){var e=e||{},r={cx:0,cy:0,fill:m.clouds,stroke:m.midnightblue,strokeWidth:2,text:"",textFill:m.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:m.amethyst,stateStroke:m.clouds,stateStrokeWidth:2,stateTextFill:m.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[],_coords:"M0,8 L8,0 L16,8 L16,21 L0,21z"};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var n=t.set(t.path(e._coords)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);n.push(t.text(8,13,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(n.attr({cursor:e.stateCursor}),n.click(function(){h(n,e)}));var i,a;e.scale&&(i=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==C(e.scale)?"s"+C(e.scale):""),e.rotate&&"NaN"!==C(e.rotate)&&(a=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==C(e.rotate)?"r"+C(e.rotate):""),n.transform("T"+e.cx+","+e.cy+a+i),getSet=function(){return n}}function f(t,e){var e=e||{},r={cx:0,cy:0,fill:m.clouds,stroke:m.midnightblue,strokeWidth:2,text:"",textFill:m.midnightblue,fontSize:12,fontWeight:700,state:!1,stateFill:m.amethyst,stateStroke:m.clouds,stateStrokeWidth:2,stateTextFill:m.clouds,stateFontSize:12,stateFontWeight:700,stateCursor:"pointer",scale:[],rotate:[],_coords:"M0,8 L8,8 L16,0 L24,8 L24,21 L0,21z"};for(var o in r)!(o in e)&&(e[o]=r[o]);getOptions=function(){return e};var n=t.set(t.path(e._coords)).attr({fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth}).data("state",!1);n.push(t.text(15,14,e.text).attr({fill:e.textFill,"font-size":e.fontSize,"font-weight":e.fontWeight})),e.state&&(n.attr({cursor:e.stateCursor}),n.click(function(){h(n,e)}));var i,a;e.scale&&(i=Array.isArray(e.scale)?"s"+e.scale.toString():"NaN"!==C(e.scale)?"s"+C(e.scale):""),e.rotate&&"NaN"!==C(e.rotate)&&(a=Array.isArray(e.rotate)?"r"+e.rotate.toString():"NaN"!==C(e.rotate)?"r"+C(e.rotate):""),n.transform("T"+e.cx+","+e.cy+a+i),getSet=function(){return n}}function u(t,e){for(var r in e)o(e,r)&&(t[r]=e[r]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e){var r;t[0].data("orig_options")?r=t[0].data("orig_options"):(r={},t.forEach(function(t,e){r[e]=t.attr(["fill","stroke","stroke-width","font-size","font-weight"])}),t.data("orig_options",r)),t[0].data("state")?(t.forEach(function(t,e){t.attr(-1!=["rect","circle","ellipse","path"].indexOf(t.type)?{fill:r[e].fill,stroke:r[e].stroke,"stroke-width":r[e]["stroke-width"]}:{fill:r[e].fill,"font-size":r[e]["font-size"],"font-weight":r[e]["font-weight"]})}),t.data("state",!1)):(t.forEach(function(t){t.attr(-1!=["rect","circle","ellipse","path"].indexOf(t.type)?{fill:e.stateFill,stroke:e.stateStroke,"stroke-width":e.stateStrokeWidth}:{fill:e.stateTextFill,"font-size":e.stateFontSize,"font-weight":e.stateFontWeight})}),t.data("state",!0))}var g,d,p,k,S,y,x="1.1.0",F=Object.prototype.hasOwnProperty,w=t.parseInt,C=t.parseFloat,v="Katan",z={brick:"\ue000",ore:"\ue003",wool:"\ue004",lumber:"\ue005",grain:"\ue006",desert:"?"},W={2:"\u25cf",3:"\u25cf\u25cf",4:"\u25cf\u25cf\u25cf",5:"\u25cf\u25cf\u25cf\u25cf",6:"\u25cf\u25cf\u25cf\u25cf\u25cf",8:"\u25cf\u25cf\u25cf\u25cf\u25cf",9:"\u25cf\u25cf\u25cf\u25cf",10:"\u25cf\u25cf\u25cf",11:"\u25cf\u25cf",12:"\u25cf"},m={alizarin:"#E74C3C",amethyst:"#9B59B6",asbestos:"#7F8C8D",belizehole:"#2980B9",carrot:"#E67E22",clouds:"#ECF0F1",concrete:"#95A5A6",emerland:"#2ECC71",greensea:"#16A085",midnightblue:"#2C3E50",nephritis:"#27AE60",orange:"#F39C12",peterriver:"#3498DB",pomegranate:"#C0392B",pumpkin:"#D35400",silver:"#BDC3C7",sunflower:"#F1C40F",turquoise:"#1ABC9C",wetasphalt:"#34495E",wisteria:"#8E44AD"};g=function(t,e,r){return new i(t,e,r)},g.version=x,g.setFontFamily=function(t){return this.fontFamily=t,this.fontFamily},g.getColors=function(){return m},g.isKatan=function(t){return t instanceof i||t instanceof a||t instanceof s||t instanceof l||t instanceof c||t instanceof f||null!=t&&o(t,"_isAKatanObject")},d=function(t,e){return new a(t,e)},p=function(t,e){return new s(t,e)},k=function(t,e){return new l(t,e)},S=function(t,e){return new c(t,e)},y=function(t,e){return new f(t,e)},u(g.fn=i.prototype,{getId:function(){return getId()},getCanvas:function(){return getCanvas()},getPaper:function(){return getPaper()}}),t.Katan=g,u(d.fn=a.prototype,{getOptions:function(){return getOptions()},getSet:function(){return getSet()}}),t.Katan.HexTile=d,u(p.fn=s.prototype,{getOptions:function(){return getOptions()},getSet:function(){return getSet()}}),t.Katan.Road=p,u(k.fn=l.prototype,{getOptions:function(){return getOptions()},getSet:function(){return getSet()}}),t.Katan.Knight=k,u(S.fn=c.prototype,{getOptions:function(){return getOptions()},getSet:function(){return getSet()}}),t.Katan.Settlement=S,u(y.fn=f.prototype,{getOptions:function(){return getOptions()},getSet:function(){return getSet()}}),t.Katan.City=y}(window,document);